<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/profile.css">
    <title>Create Profile</title>
</head>
<style>
    body {
        text-align: center;
    }
</style>

<body>

    <h1> Create Your Profile </h1>
    <div>
        <section class="container forms">
            <div class="form login">
                <div class="form-content">
                    <header>Profile Details</header>
                    <form action="#" id="formsubmit">
                        <div class="field input-field">
                            <input type="text" placeholder="DoctorName" required class="input" id="doctorName">
                        </div>
                        <div class="field input-field">
                            <input type="text" placeholder="Qualifications" required class="input" id="qualifications">
                        </div>
                        <div class="field input-field">
                            <input type="text" placeholder="Speciality" required class="input" id="speciality">
                        </div>
                        <div class="field input-field">
                            <input type="text" placeholder="Experience" required class="input" id="experience">
                        </div>
                        <div class="field input-field">
                            <input type="number" placeholder="Fees" required class="input" id="setfees">
                        </div>
                        <div class="field input-field">
                            <input type="text" placeholder="City" required class="input" id="city">
                        </div>
                        <div class="field button-field">
                            <button id="submit" type="submit">Submit Details</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>
    </div>
</body>

</html>
<script>

    const baseURL = "https://poco-backend.onrender.com/api"

    document.getElementById("formsubmit").addEventListener("submit", (e) => {
        e.preventDefault();
        let doctorName = document.getElementById("doctorName").value;
        let qualifications = document.getElementById("qualifications").value;
        let speciality = document.getElementById("speciality").value;
        let experience = document.getElementById("experience").value;
        let setfees = document.getElementById("setfees").value;
        let city = document.getElementById("city").value;
        let data = {
            doctorName,
            qualifications,
            speciality,
            experience,
            setfees,
            city
        }
        console.log(data);
        createProfile(data);

    });
    async function createProfile(data) {
        let response;
        try {
            response = await fetch(`http://localhost:8080/api/profile`, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json", 
                    Authorization: JSON.parse(localStorage.getItem("token")),
                },
                body: JSON.stringify(data)
            });

            const responseData = await response.json();
            console.log(responseData);
            // Handle the response
            alert(responseData.msg);
        } catch (error) {
            console.log(error);
            alert("An error occurred. Please try again.");
        }
    }

    // async function createProfile(data) {
    //     const response = await fetch(`https://poco-backend.onrender.com/api/profile`, {
    //         method: "POST",
    //         headers: {
    //             "Content-Type": "application/json",
    //             Authorization: JSON.parse(localStorage.getItem("token")),
    //         },
    //         body: JSON.stringify(data)
    //     });
    //     response = await res.json();
    //     console.log(response);
    //     // Handle the response
    //     alert(response.msg)
    // }
</script>